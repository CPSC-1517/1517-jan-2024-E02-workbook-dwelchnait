@page "/categoryproducts"
<PageTitle>Category Products</PageTitle>
@rendermode InteractiveServer
@using WestWindSystem.Entities;
@using WestWindSystem.BLL;
<h3>Category Products</h3>
<!-- area to feedback messages-->
@if (feedback.Length > 0)
{
    <div class="alert alert-info">
        <p>@feedback</p>
    </div>
}
<!-- area to error messages-->
@if (errors.Count > 0)
{
    <div class="alert alert-danger">
        <p>Please fix the following issues:</p>
        <ul>
            @foreach (var error in errors)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}

<div class="row">
    <div class="col-md-12">
        <label for="catlist">Select Product Category:</label>
        &nbsp;&nbsp;
        <select id="catlist" @bind="CategoryId">
            <option value="0">select category ...</option>
            @foreach(var cat in categoryList)
            {
                <option value="@cat.CategoryID">@cat.CategoryName</option>
            }
        </select>
        &nbsp;&nbsp;
        <button type="submit" class="btn btn-outline-primary rounded-pill"
                    @onclick="FetchProducts">Fetch Products</button>
    </div>
</div>

<!-- create a filter input area
     drop down list of category names to select from

-->
@code {
    // since we are coding with c# class, let's use properties for our variables
    private string feedback { get; set; } = "";
    private List<string> errors { get; set; } = new List<string>();

    //inject the CategoryService into the page
    //this will allow access to the methods in the CategoryService BLL class
    [Inject]
    private CategoryServices _categoryServices { get; set; }
    private List<Category> categoryList { get; set; }
    private int CategoryId { get; set; }

    protected override void OnInitialized()
    {
        //retrieve the list of category via the CategoryServices in your BLL
        categoryList = _categoryServices.Category_GetList();
        base.OnInitialized();
    }

    private void FetchProducts()
    {
        feedback = "inside Fetch";
    }
}
